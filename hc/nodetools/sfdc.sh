#!/bin/bash
#
#GB200-POD2-F10-Node[01-18] SFDC-00001110
#GB200-POD2-F12-Node04 SFDC-00001103
#GB200-POD1-A07-Node01 SFDC-00001109
#GB200-POD1-A11-Node07 SFDC-00001108
#GB200-POD1-B10-Node[01-08,10-18] SDFC-00001122
#GB200-POD1-B02-Node[01-08] SDFC-00001123
#GB200-POD1-B02-Node[01-18] SFDC-00001123
#GB200-POD1-B10-Node[01-08,10-18] SFDC-00001122
#GB200-POD1-A07-Node[01-18] SFDC-00001127
#GB200-POD2-E13-Node[01-18] SFDC-00001129
#GB200-POD1-B08-Node[01-18] SFDC-00001132
#GB200-POD2-F12-Node11 SFDC-00001133

while read nodes id
do
  scontrol update nodename="${nodes}" state=drain reason="${id}"
done <<- 'EOF'
GB200-POD2-F14-Node18 00001138
GB200-POD1-B14-Node14 00001139
GB200-POD1-B08-Node12 00001140
EOF

sinfo -R -o "%120E %12U %19H %6t %N"

#GB200-POD1-B14-Node11,GB200-POD2-F10-Node12,GB200-POD1-B10-Node09 SFDC-00001101

